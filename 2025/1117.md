# 🌱 TIL Day 3 — JOIN·집계·날짜 필터 중심 SQL 실전 문제 풀이 정리

## 📌 오늘의 학습 목표
- 날짜 필터 조건을 WHERE vs JOIN 절 중 어디에 두는지 차이 이해
- GROUP BY 단위가 결과를 어떻게 달라지게 하는지 파악
- 최근 30일 매출 계산 실전 문제 풀기

#### 오늘의 문제
- 최근 30일간 카테고리별 + 상품별 총 매출액을 구하고, 매출이 높은 순으로 정렬하라.

#### 정답
```sql
SSELECT
    A.category_id,
    A.product_id,
    A.name AS product_name,
    COALESCE(SUM(A.price * B.quantity), 0) AS total_sales_last30
FROM PRODUCT A
LEFT JOIN ORDER_ITEM B
    ON A.product_id = B.product_id
LEFT JOIN ORDERS C
    ON B.order_id = C.order_id
   AND C.order_date >= CURDATE() - INTERVAL 30 DAY
GROUP BY
    A.category_id,
    A.product_id,
    A.name
ORDER BY total_sales_last30 DESC;
```

## 📝 오늘 배운점
- 카테고리별 + 상품별 매출이므로 PRODUCT가 기준
- 최근 30일동안 주문이 없는 상품은 제외하기 때문에 JOIN 절에 넣어 null 처리 되도록
- 날짜 필터를 WHERE 절에 두면 LEFT JOIN의 null row까지 걸러져서 사실상 INNER JOIN처럼 동작
- GROUP BY 단위는 출력 단위 (결과가 어떤 단위로 나오길 원하는가)
